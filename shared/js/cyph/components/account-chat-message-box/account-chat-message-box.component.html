<form #messageForm='ngForm' fxFlexFill fxLayout='column' fxLayoutGap='8px' (submit)='submit()'>
	<ng-container *ngIf='showHeader'>
		<ng-container *ngIf='(recipient === undefined ? undefined : recipient | async) as contact'>
			<cyph-account-contact
				[clickable]='false'
				[contact]='contact'
				class='cyph-inverted-theme'
			></cyph-account-contact>

			<hr />
		</ng-container>
	</ng-container>

	<cyph-chat-message-box-inherit-ng-form
		#chatMessageBox
		[calendarInviteFollowUp]='calendarInviteFollowUp'
		[calendarInviteReasons]='calendarInviteReasons'
		[customSendFunction]='customSendFunction'
		[fileAccept]='fileAccept'
		[messageType]='messageType'
		[showSendButton]='!showHeader'
		[showUnreadCount]='showUnreadCount'
	></cyph-chat-message-box-inherit-ng-form>

	<div
		fxLayoutAlign='left'
		*ngIf='showHeader && messageType !== chatMessageValueTypes.Form'
	>
		<button
			mat-raised-button
			color='accent'
			fxFlex
			fxFlex.gt-sm='initial'
			[disabled]='
				disableSend ||
				messageForm.invalid ||
				(recipient !== undefined && (recipient | async) === undefined)
			'
			type='submit'
			cyphTranslate
		>
			Send
		</button>
	</div>
</form>
