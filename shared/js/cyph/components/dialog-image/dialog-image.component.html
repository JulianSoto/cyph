<div fxLayout='row'>
	<h1 matDialogTitle *ngIf='title'>{{title}}</h1>
	<div fxFlex></div>
	<div mat-dialog-actions fxLayoutAlign='end center' *ngIf='!cropResult'>
		<button
			matDialogClose
			mat-icon-button
			cyphTranslate
			matTooltip='Close'
		>
			<mat-icon>close</mat-icon>
		</button>
	</div>
</div>

<div mat-dialog-content>
	<div fxFlex [class.crop-container]='!!cropResult'>
		<ng-container *ngIf='!cropResult; else imageCropUI'>
			<img cyphTranslate alt='Full size image' [src]='src' *ngIf='!video' />

			<video cyphTranslate autoplay controls alt='Video' *ngIf='video'>
				<source [type]='mediaType' [src]='src' />
			</video>
		</ng-container>

		<ng-template #imageCropUI>
			<image-cropper
				format='png'
				[aspectRatio]='cropAspectRatio'
				[imageBase64]='imageBase64'
				[maintainAspectRatio]='!!cropAspectRatio'
				(imageCroppedBase64)='cropped = $event'
				(loadImageFailed)='crop(false)'
				*ngIf='safeUrlToString(src, mediaType) | async as imageBase64'
			></image-cropper>
		</ng-template>
	</div>
</div>

<div mat-dialog-actions class='crop-actions' fxLayoutAlign='end center' *ngIf='!!cropResult'>
	<button mat-button class='cancel' (click)='crop(false)'>{{stringsService.cancel}}</button>
	<button mat-button class='ok' (click)='crop(true)'>{{stringsService.ok}}</button>
</div>
