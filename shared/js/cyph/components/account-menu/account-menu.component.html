<ng-container *ngIf='accountDatabaseService.currentUser | async as currentUser'>


<div
	fxFlexFill
	fxLayout='row'
	[class.collapsed]='(menuExpanded | async) === false'
	[class.menu]='!sidenav'
	[class.menu-root]='!sidenav'
	[class.mobile]='envService.isMobile'
	[class.sidenav]='sidenav'
>
	<div
		fxFlex
		fxLayout='column'
		fxLayoutAlign='center stretch'
	>
		<ng-container *ngTemplateOutlet='buttons'></ng-container>
	</div>

	<button
		mat-button
		fxFlex='25px'
		fxHide.lt-md
		cyphTranslate
		class='menu-toggle'
		matTooltip='Toggle Menu'
		matTooltipPosition='right'
		(click)='accountService.toggleMenu()'
		*ngIf='accountService.menuExpandable | async'
	>
		<mat-icon [class.flipped]='(menuExpanded | async) === false'>
			keyboard_arrow_left
		</mat-icon>
	</button>

	<div fxFlex='10px' *ngIf='
		!sidenav &&
		(accountService.menuExpandable | async) === false &&
		(accountService.menuReduced | async) === false
	'></div>
</div>

<ng-template #buttons>
	<div fxFlex><div cyphNanoScroller><div fxFlex fxFlexFill>


	<div
		class='cover-image'
		[style.background-image]='urlToSafeStyle(currentUser.user.coverImage | async) | async'
		*ngIf='menuExpanded | async'
	></div>

	<mat-nav-list class='home-list'>
		<a
			mat-list-item
			cyphTranslate
			class='home'
			aria-label='Home'
			[routerLink]='accountService.routeRoot'
			(click)='click()'
		>
			<cyph-logo mat-list-icon icon *ngIf='(menuExpanded | async) === false'></cyph-logo>
			<cyph-logo matLine *ngIf='menuExpanded | async'></cyph-logo>
		</a>
	</mat-nav-list>

	<mat-list class='avatar-list'>
		<mat-list-item>
			<img
				cyphTranslate
				matListAvatar
				class='avatar'
				[ngClass]='userPresence[(currentUser.user.status | async) || 0]'
				alt='Profile Picture'
				[src]='currentUser.user.avatar | async'
				[routerLink]='accountService.routeRoot + "profile"'
				(click)='click()'
			/>
			<h3 matLine [fxShow]='menuExpanded | async'>
				{{currentUser.user.name | async}}
			</h3>
			<p matLine [fxShow]='menuExpanded | async'>
				@{{currentUser.user.realUsername | async}}
			</p>
		</mat-list-item>
	</mat-list>

	<mat-nav-list>
		<ng-container *ngIf='
			envService.isTelehealth &&
			(currentUser.user.userType | async) === accountUserTypes.Standard &&
			(accountFilesService.incomingFilesFiltered.redoxPatients | async)?.length > 0
		'>
			<a
				mat-list-item
				cyphTranslate
				class='incoming-patient-info emphasis'
				aria-label='Incoming Patient Info'
				[routerLink]='accountService.routeRoot + "incoming-patient-info"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>local_hospital</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Incoming
				</h3>
			</a>
		</ng-container>

		<ng-container *ngIf='envService.isTelehealth'>
			<a
				mat-list-item
				cyphTranslate
				class='appointments'
				aria-label='Appointments'
				[routerLink]='accountService.routeRoot + "appointments"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>date_range</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Appointments
				</h3>
			</a>
		</ng-container>

		<ng-container *ngIf='
			envService.isTelehealth &&
			(currentUser.user.userType | async) !== accountUserTypes.TelehealthDoctor
		'>
			<a
				mat-list-item
				cyphTranslate
				class='doctors'
				aria-label='Doctors'
				[routerLink]='accountService.routeRoot + "doctors"'
				(click)='click()'
			>
				<mat-icon mat-list-icon svgIcon='doctor'></mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Doctors
				</h3>
			</a>
		</ng-container>

		<ng-container *ngIf='
			envService.isTelehealth &&
			(currentUser.user.userType | async) !== accountUserTypes.Standard
		'>
			<a
				mat-list-item
				cyphTranslate
				class='patients'
				aria-label='Patients'
				[routerLink]='accountService.routeRoot + "patients"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>local_hospital</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Patients
				</h3>
			</a>

			<a
				mat-list-item
				cyphTranslate
				class='staff'
				aria-label='Staff'
				[routerLink]='accountService.routeRoot + "staff"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>people</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Staff
				</h3>
			</a>

			<a
				mat-list-item
				cyphTranslate
				class='ehr-access'
				aria-label='EHR Access'
				[routerLink]='accountService.routeRoot + "ehr-access"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>vpn_key</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					EHR Access
				</h3>
			</a>
		</ng-container>

		<ng-container *ngIf='!envService.isTelehealth'>
			<a
				mat-list-item
				cyphTranslate
				class='contacts'
				aria-label='Messages'
				[routerLink]='accountService.routeRoot'
				(click)='click()'
			>
				<mat-icon mat-list-icon>message</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Messages
				</h3>
			</a>
		</ng-container>

		<ng-container *ngIf='!envService.isTelehealth || (
			envService.isTelehealth &&
			(currentUser.user.userType | async) !== accountUserTypes.Standard
		)'>
			<a
				mat-list-item
				cyphTranslate
				class='files'
				aria-label='Files'
				[routerLink]='accountService.routeRoot + "files"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>folder</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Files
				</h3>
			</a>

			<a
				mat-list-item
				cyphTranslate
				class='notes'
				aria-label='Notes'
				[routerLink]='accountService.routeRoot + "notes"'
				(click)='click()'
			>
				<mat-icon mat-list-icon>create</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Notes
				</h3>
			</a>

			<a
				mat-list-item
				cyphTranslate
				class='docs'
				aria-label='Docs'
				[routerLink]='accountService.routeRoot + "docs"'
				(click)='click()'
				*ngIf='accountService.enableDocs'
			>
				<mat-icon mat-list-icon>library_books</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Docs
				</h3>
			</a>

			<ng-template #medicalFormsIcon>
				<mat-icon svgIcon='medical-forms'></mat-icon>
			</ng-template>

			<a
				mat-list-item
				cyphTranslate
				class='forms'
				aria-label='Forms'
				[routerLink]='accountService.routeRoot + "forms"'
				(click)='click()'
				*ngIf='!envService.environment.production || envService.isTelehealth'
			>
				<mat-icon mat-list-icon *ngIf='!envService.isTelehealth; else medicalFormsIcon'>
					content_paste
				</mat-icon>
				<ng-template #medicalFormsIcon>
					<mat-icon mat-list-icon svgIcon='medical-forms'></mat-icon>
				</ng-template>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Forms
				</h3>
			</a>

			<a
				mat-list-item
				cyphTranslate
				class='wallets'
				aria-label='Wallets'
				[routerLink]='accountService.routeRoot + "wallets"'
				(click)='click()'
				*ngIf='accountService.enableWallets'
			>
				<mat-icon mat-list-icon>account_balance_wallet</mat-icon>
				<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
					Wallets
				</h3>
			</a>
		</ng-container>
	</mat-nav-list>


	</div></div></div>

	<mat-nav-list>
		<mat-divider></mat-divider>

		<a
			mat-list-item
			cyphTranslate
			class='settings'
			aria-label='Settings'
			[routerLink]='accountService.routeRoot + "settings"'
			(click)='click()'
		>
			<mat-icon mat-list-icon>settings</mat-icon>
			<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
				Settings
			</h3>
		</a>

		<a
			mat-list-item
			cyphTranslate
			class='logout'
			aria-label='Log Out'
			[routerLink]='accountService.routeRoot + "logout"'
			(click)='click()'
		>
			<mat-icon mat-list-icon>exit_to_app</mat-icon>
			<h3 matLine cyphTranslate *ngIf='menuExpanded | async'>
				Log Out
			</h3>
		</a>
	</mat-nav-list>
</ng-template>


</ng-container>
